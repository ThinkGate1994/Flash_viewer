<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aimagin File Server</title>
    <link rel="stylesheet" href="plugins/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="styles/style_index.css">
</head>

<body>
    <div class="container-fluid">
        <div class="d-flex mt-5">
            <div class="col-3"></div>
            <div class="col-6">
                <!------ Tabs navs ------>
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="write-tab" data-bs-toggle="tab"
                            data-bs-target="#write-tab-pane" type="button" role="tab" aria-controls="write-tab-pane"
                            aria-selected="true">Write</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="Read-tab" data-bs-toggle="tab" data-bs-target="#Read-tab-pane"
                            type="button" role="tab" aria-controls="Read-tab-pane" aria-selected="false">Read</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="clear-tab" data-bs-toggle="tab" data-bs-target="#clear-tab-pane"
                            type="button" role="tab" aria-controls="clear-tab-pane" aria-selected="false">Clear</button>
                    </li>
                </ul>
                <div class="tab-content" id="myTabContent">
                    <!------ Write ------>
                    <div class="tab-pane fade show active" id="write-tab-pane" role="tabpanel"
                        aria-labelledby="write-tab" tabindex="0">
                        <div class="text-center bg-primary-subtle">
                            <span class="fs-3">Write files to Flash</span>
                        </div>
                        <div class="my-3">
                            <label for="formFile" class="form-label">Select the .zip file need to flash from your file
                                directory. Make sure the folder rename as "allf-filename".</label>
                        </div>
                        <div class="row">
                            <div class="col-8">
                                <input class="form-control" type="file" id="fileInput" accept=".zip">
                            </div>
                            <div class="col-4 d-flex justify-content-end">
                                <div>
                                    <button class="btn btn-outline-secondary" onclick="extractFiles()">Extract Files and
                                        Upload</button>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3">
                            <span id="stat"></span>
                            <p id="progress">File Upload Progress: 0%</p>
                            <div class="progress" role="progressbar" aria-label="File Upload Progress" aria-valuemin="0"
                                aria-valuemax="100">
                                <div class="progress-bar" id="fileProgressBar" style="width: 0%">0%</div>
                            </div>
                            <div class="alert alert-success mt-3" id="uploadSuccessMessage" style="display: none;">
                                All files uploaded successfully!
                            </div>
                            <div id="output"></div>
                        </div>
                    </div>
                    <!------ Read ------>
                    <div class="tab-pane fade" id="Read-tab-pane" role="tabpanel" aria-labelledby="Read-tab"
                        tabindex="0">
                        <div class="text-center bg-primary-subtle">
                            <span class="fs-3">Read files from Flash</span>
                        </div>
                        <div id="directory" class="mt-3"></div>
                    </div>
                    <!------ Clear ------>
                    <div class="tab-pane fade" id="clear-tab-pane" role="tabpanel" aria-labelledby="clear-tab"
                        tabindex="0">
                        <div class="text-center bg-primary-subtle">
                            <span class="fs-3">Clear Flash</span>
                        </div>
                        <div class="mt-3">
                            <label for="clear_flash">Do you want to clear the flash?</label>
                            <button type="button" class="btn btn-danger" style="width: 100px;"
                                onclick="clear_flash()">Yes</button>
                            <div id="buffering" class="spinner-border text-primary mt-3" role="status"
                                style="display: none;">
                                <span class="visually-hidden">waiting...</span>
                            </div>
                            <div class="alert alert-success mt-3" id="f_success" style="display: none;" role="alert">
                                Flash clear success !
                            </div>
                            <div class="alert alert-danger mt-3" id="f_fail" style="display: none;" role="alert">
                                Flash clear fail !
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-3"></div>
        </div>
    </div>

    <script src="plugins/jszip/jszip.min.js"></script>
    <script src="plugins/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="scripts/script_index.js"></script>
</body>

</html>